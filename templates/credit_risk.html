<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Credit Risk Calculator - InvestIQ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5',
                        secondary: '#818cf8',
                        accent: '#a5b4fc',
                        dark: '#1e293b',
                        light: '#f8fafc',
                        success: '#10b981',
                        info: '#0ea5e9',
                        warning: '#f59e0b',
                        danger: '#ef4444'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #e6e9ff 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        .card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        .input-field {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #a5b4fc;
            box-shadow: 0 0 0 4px rgba(165, 180, 252, 0.25);
        }
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .nav-button {
            display: flex;
            alignMSEs: center;
            padding: 10px 20px;
            background: white;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .nav-button.home {
            background: #4f46e5;
            color: white;
        }
        .nav-button.calculators {
            background: #10b981;
            color: white;
        }
        .nav-button i {
            margin-right: 8px;
        }
        .target-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4f46e5;
            margin: 10px 0;
        }
        .target-interpretation {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            background-color: #f0f9ff;
            border-left: 4px solid #0ea5e9;
        }
        .formula {
            font-family: 'Courier装置 New', monospace;
            background-color: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background-color: #f8fafc;
            font-weight: 600;
            color: #1e293b;
        }
        td {
            color: #374151;
        }
        .warning-message {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #78350f;
        }
        .timeline-diagram {
            font-family: 'Courier New', monospace;
            background-color: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #e2e8f0;
            white-space: pre;
        }
        .result-box {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4f46e5;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .statement-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .statement-table th, .statement-table td {
            padding: 8px;
            border: 1px solid #e2e8f0;
        }
        .statement-table th {
            background-color: #f1f5f9;
        }
        .tab-button {
            padding: 10px 20px;
            background: #e2e8f0;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            margin-right: 5px;
        }
        .tab-button.active {
            background: #4f46e5;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="text-gray-800">
    <header class="gradient-bg text-white py-8 px-4 md:px-8">
        <div class="max-w-6xl mx-auto">
            <nav class="hidden md:flex justify-between items-center mb-6">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-white hover:text-indigo-200 transition-colors">Home</a>
                    <a href="/#calculators" class="text-white font-medium border-b-2 border-white">Calculators</a>
                    <a href="/help" class="text-white hover:text-indigo-200 transition-colors">Help Center</a>
                    <a href="/articles" class="text-white hover:text-indigo-200 transition-colors">Resources</a>
                </div>
                <a href="/help" class="bg-white text-primary px-4 py-2 rounded-lg font-medium hover:bg-indigo-50 transition-colors">Get Started</a>
            </nav>
            <div class="max-w-3xl">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Bank Credit Risk Calculator</h1>
                <p class="text-xl md:text-2xl text-indigo-100 mb-6">Calculate key credit risk metrics for Ghanaian banks using financial statements.</p>
                <div class="flex flex-wrap gap-3">
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        <span>Beginner Friendly</span>
                    </div>
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-download mr-2"></i>
                        <span>Downloadable Guide</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4 py-8">
        <div class="nav-buttons mb-6">
            <a href="/" class="nav-button home"><i class="fas fa-home"></i> Return to Home</a>
            <a href="/#calculators" class="nav-button calculators"><i class="fas fa-calculator"></i> Other Calculators</a>
        </div>

        <div class="card p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Calculate Bank Credit Risk Metrics</h2>
            <p class="text-gray-600 mb-6">Enter financial statement data for 3 years to calculate key credit risk metrics for a Ghanaian bank. All monetary values in Ghanaian Cedi (GHS).</p>
            
            <div class="tabs mb-6">
                <button class="tab-button active" data-tab="income-statement">Income Statement</button>
                <button class="tab-button" data-tab="balance-sheet">Balance Sheet</button>
                <button class="tab-button" data-tab="cash-flow">Cash Flow Statement</button>
                <button class="tab-button" data-tab="economic-data">Economic Data</button>
            </div>
            
            <form id="credit-risk-form" class="space-y-6">
                <div class="tab-content active" id="income-statement">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Income Statement Data</h3>
                    <table class="statement-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Year 1 (GH¢'000)</th>
                                <th>Year 2 (GH¢'000)</th>
                                <th>Year 3 (GH¢'000)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Interest income</td>
                                <td><input type="number" name="interest_income_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="interest_income_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="interest_income_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Interest expense</td>
                                <td><input type="number" name="interest_expense_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="interest_expense_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="interest_expense_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Net fee and commission</td>
                                <td><input type="number" name="net_fee_commission_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="net_fee_commission_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="net_fee_commission_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Net impairment loss on financial assets</td>
                                <td><input type="number" name="impairment_loss_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="impairment_loss_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="impairment_loss_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Net trading income</td>
                                <td><input type="number" name="trading_income_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="trading_income_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="trading_income_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Other operating income</td>
                                <td><input type="number" name="other_income_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_income_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_income_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Personnel expenses</td>
                                <td><input type="number" name="personnel_expenses_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="personnel_expenses_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="personnel_expenses_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Depreciation and amortization</td>
                                <td><input type="number" name="depreciation_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="depreciation_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="depreciation_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Other operating expenses</td>
                                <td><input type="number" name="other_expenses_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_expenses_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_expenses_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Taxation</td>
                                <td><input type="number" name="taxation_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="taxation_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="taxation_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Profit after tax</td>
                                <td><input type="number" name="net_income_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="net_income_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="net_income_3" class="input-field w-full p-2"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="balance-sheet">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Balance Sheet Data</h3>
                    <table class="statement-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Year 1 (GH¢'000)</th>
                                <th>Year 2 (GH¢'000)</th>
                                <th>Year 3 (GH¢'000)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Cash and cash equivalents</td>
                                <td><input type="number" name="cash_equivalents_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_equivalents_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_equivalents_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Non-pledged trading Assets</td>
                                <td><input type="number" name="trading_assets_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="trading_assets_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="trading_assets_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Investment securities</td>
                                <td><input type="number" name="investment_securities_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="investment_securities_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="investment_securities_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Loans and advances to customers</td>
                                <td><input type="number" name="loans_customers_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="loans_customers_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="loans_customers_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Property, equipment and right-of-use assets</td>
                                <td><input type="number" name="property_assets_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="property_assets_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="property_assets_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Other assets</td>
                                <td><input type="number" name="other_assets_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_assets_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_assets_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Deposits from banks</td>
                                <td><input type="number" name="deposits_banks_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="deposits_banks_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="deposits_banks_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Deposits from customers</td>
                                <td><input type="number" name="deposits_customers_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="deposits_customers_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="deposits_customers_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Borrowings</td>
                                <td><input type="number" name="borrowings_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="borrowings_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="borrowings_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Other liabilities</td>
                                <td><input type="number" name="other_liabilities_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_liabilities_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="other_liabilities_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Total equity</td>
                                <td><input type="number" name="total_equity_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="total_equity_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="total_equity_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Market Capitalization</td>
                                <td><input type="number" name="market_cap_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="market_cap_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="market_cap_3" class="input-field w-full p-2"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="cash-flow">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Cash Flow Statement Data</h3>
                    <table class="statement-table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Year 1 (GH¢'000)</th>
                                <th>Year 2 (GH¢'000)</th>
                                <th>Year 3 (GH¢'000)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Net cash from operating activities</td>
                                <td><input type="number" name="cash_operating_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_operating_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_operating_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Net cash from investing activities</td>
                                <td><input type="number" name="cash_investing_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_investing_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_investing_3" class="input-field w-full p-2"></td>
                            </tr>
                            <tr>
                                <td>Net cash from financing activities</td>
                                <td><input type="number" name="cash_financing_1" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_financing_2" class="input-field w-full p-2"></td>
                                <td><input type="number" name="cash_financing_3" class="input-field w-full p-2"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="economic-data">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Economic Data & Forecast Assumptions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Ghana Inflation Rate (%)</label>
                            <input type="number" step="0.1" name="inflation_rate" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Current inflation rate in Ghana (source: Bank of Ghana)</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">GHS Depreciation Rate (%)</label>
                            <input type="number" step="0.1" name="depreciation_rate" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Annual depreciation rate of Ghana Cedi against USD</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Bank of Ghana Policy Rate (%)</label>
                            <input type="number" step="0.1" name="policy_rate" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Central bank's monetary policy rate</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">GDP Growth Forecast (%)</label>
                            <input type="number" step="0.1" name="gdp_growth" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Expected GDP growth rate for Ghana</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <label class="block text-gray-700 font-medium mb-2">Forecast Period (Years)</label>
                        <select name="forecast_years" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <option value="1">1 Year</option>
                            <option value="2">2 Years</option>
                            <option value="3" selected>3 Years</option>
                        </select>
                    </div>
                </div>

                <div class="flex gap-4 mt-6">
                    <button type="submit" id="calculate-btn" class="px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors"><i class="fas fa-calculator mr-2"></i> Calculate</button>
                    <button type="reset" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"><i class="fas fa-eraser mr-2"></i> Clear</button>
                </div>
            </form>
            <div id="error-message" class="mt-6 hidden">
                <div class="bg-red-50 p-4 rounded-lg">
                    <p class="text-red-700 font-medium" id="error-text"></p>
                </div>
            </div>
            <div id="results-section" class="mt-8 hidden"></div>
        </div>

        <div class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Understanding Bank Credit Risk Metrics</h2>
            <p class="text-gray-600 mb-6">Credit risk metrics are essential tools for assessing a bank's financial stability and its exposure to potential loan defaults. These metrics provide insights into the bank's ability to manage lending risks, maintain solvency, and operate efficiently in the context of Ghana's economic environment. Below is a detailed explanation of the key metrics used in this calculator:</p>
            <ul class="list-disc pl-6 space-y-2 text-gray-600">
                <li><strong>Provision for Credit Losses (PCL) Ratio:</strong> Measures the proportion of loans expected to default, calculated as the net impairment loss on financial assets divided by total loans to customers. A lower ratio indicates better loan quality and lower credit risk.</li>
                <li><strong>Net Interest Margin (NIM):</strong> Represents the profitability of the bank's lending activities, calculated as the difference between interest income and interest expense divided by earning assets. A higher NIM suggests stronger profitability from interest-generating activities.</li>
                <li><strong>Return on Assets (ROA):</strong> Indicates how efficiently a bank uses its assets to generate profit, calculated as net income divided by total assets. A higher ROA reflects better asset utilization.</li>
                <li><strong>Return on Equity (ROE):</strong> Measures the return generated on shareholders' equity, calculated as net income divided by total equity. A higher ROE indicates better profitability for shareholders.</li>
                <li><strong>Efficiency Ratio:</strong> Assesses operational efficiency by comparing non-interest expenses to operating income. A lower ratio indicates better cost management.</li>
                <li><strong>Leverage Ratio:</strong> Evaluates capital adequacy by comparing total equity to total assets. A higher ratio suggests a stronger capital buffer against potential losses.</li>
                <li><strong>Debt to Assets Ratio:</strong> Measures the proportion of assets financed by debt, calculated as total liabilities divided by total assets. A lower ratio indicates lower financial risk.</li>
                <li><strong>Loans to Deposits Ratio:</strong> Reflects liquidity risk by comparing loans to customers with customer deposits. A lower ratio suggests a more conservative lending approach, while a higher ratio may indicate aggressive lending practices.</li>
            </ul>
            <p class="text-gray-600 mt-4">These metrics, when analyzed together, provide a comprehensive view of a bank's credit risk profile, helping investors, analysts, and regulators assess its financial health and resilience to economic challenges, particularly in Ghana's unique economic context influenced by factors like inflation and currency depreciation.</p>
        </div>

        <div class="card p-6 mb-8">
            <button type="button" onclick="toggleHelpSection()" class="w-full text-left text-2xl font-bold text-gray-800 flex justify-between items-center focus:outline-none">
                <span>How to Find Credit Risk Data</span>
                <span id="help-toggle-icon" class="text-gray-500 text-xl">➕</span>
            </button>
            <div id="help-section" class="hidden mt-4 text-gray-600">
                <p class="mb-4">Obtaining accurate financial data is critical for calculating credit risk metrics. Below are detailed steps to source the necessary data for Ghanaian banks:</p>
                <ul class="list-disc pl-6 space-y-2">
                    <li><strong>Bank Financial Statements:</strong> Access the bank's annual reports, typically available on their official website under the investor relations section. These reports include income statements, balance sheets, and cash flow statements, which provide data for metrics like interest income, net income, total assets, and total equity.</li>
                    <li><strong>Bank of Ghana Reports:</strong> The Bank of Ghana publishes financial stability reports and banking sector data, which include aggregated figures for loans, deposits, and impairment losses. Visit the Bank of Ghana's website for these reports.</li>
                    <li><strong>Stock Exchange Data:</strong> For publicly listed banks, market capitalization and other financial metrics can be obtained from the Ghana Stock Exchange (GSE) website or financial data platforms like Bloomberg or Reuters.</li>
                    <li><strong>Economic Data:</strong> Macroeconomic indicators such as inflation rate, currency depreciation rate, policy rate, and GDP growth forecasts are available from the Bank of Ghana, Ghana Statistical Service, or international organizations like the IMF and World Bank. Check their respective websites for the latest reports.</li>
                    <li><strong>Regulatory Filings:</strong> Banks submit regulatory filings to the Bank of Ghana, which may include detailed breakdowns of loans, deposits, and provisions for credit losses. These can sometimes be accessed through formal requests or public disclosures.</li>
                    <li><strong>Financial News and Analyst Reports:</strong> Local financial news outlets and analyst reports from firms like Databank or Stanbic Bank Ghana provide insights into bank performance and economic conditions, which can help contextualize the data.</li>
                    <li><strong>Third-Party Databases:</strong> Platforms like S&P Global, Moody’s, or Fitch Ratings may provide credit risk data and ratings for major Ghanaian banks, though access may require a subscription.</li>
                </ul>
                <p class="mt-4">Ensure all data is in Ghanaian Cedi (GHS) and corresponds to the correct year. Cross-check figures from multiple sources to ensure accuracy, and consult a financial advisor if you are unsure about interpreting the data.</p>
            </div>
        </div>

        <div class="nav-buttons mt-6">
            <a href="/" class="nav-button home"><i class="fas fa-home"></i> Return to Home</a>
            <a href="/#calculators" class="nav-button calculators"><i class="fas fa-calculator"></i> Other Calculators</a>
        </div>
    </div>

    <footer class="bg-dark text-white py-12">
    </footer>

    <button id="backToTop" class="back-to-top w-12 h-12 bg-primary text-white rounded-full shadow-lg flex items-center justify-center">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all tabs and contents
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
            });
        });

        // Number formatting function
        function formatNumber(value) {
            return parseFloat(value).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        // Back-to-top button functionality
        const backToTopBtn = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            backToTopBtn.classList.toggle('visible', window.scrollY > 300);
        });
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Form elements
        const form = document.getElementById('credit-risk-form');
        const resultsSection = document.getElementById('results-section');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        // Toggle help section
        function toggleHelpSection() {
            const helpSection = document.getElementById('help-section');
            const toggleIcon = document.getElementById('help-toggle-icon');
            helpSection.classList.toggle('hidden');
            toggleIcon.textContent = helpSection.classList.contains('hidden') ? '➕' : '➖';
        }

        // Form validation and calculation
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
            errorMessage.classList.add('hidden');

            // Collect form data
            const formData = new FormData(e.target);
            const inflationRate = parseFloat(formData.get('inflation_rate')) / 100;
            const depreciationRate = parseFloat(formData.get('depreciation_rate')) / 100;
            const policyRate = parseFloat(formData.get('policy_rate')) / 100;
            const gdpGrowth = parseFloat(formData.get('gdp_growth')) / 100;
            const forecastYears = parseInt(formData.get('forecast_years'));

            // Validate inputs
            let errors = [];
            if (isNaN(inflationRate) || isNaN(depreciationRate) || isNaN(policyRate) || isNaN(gdpGrowth)) {
                errors.push('Please enter valid economic data.');
            }

            // Collect financial data for 3 years
            const financialData = [];
            for (let i = 1; i <= 3; i++) {
                const data = {};
                
                // Income statement data
                data.interest_income = parseFloat(formData.get(`interest_income_${i}`));
                data.interest_expense = parseFloat(formData.get(`interest_expense_${i}`));
                data.net_fee_commission = parseFloat(formData.get(`net_fee_commission_${i}`));
                data.impairment_loss = parseFloat(formData.get(`impairment_loss_${i}`));
                data.trading_income = parseFloat(formData.get(`trading_income_${i}`));
                data.other_income = parseFloat(formData.get(`other_income_${i}`));
                data.personnel_expenses = parseFloat(formData.get(`personnel_expenses_${i}`));
                data.depreciation = parseFloat(formData.get(`depreciation_${i}`));
                data.other_expenses = parseFloat(formData.get(`other_expenses_${i}`));
                data.taxation = parseFloat(formData.get(`taxation_${i}`));
                data.net_income = parseFloat(formData.get(`net_income_${i}`));
                
                // Balance sheet data
                data.cash_equivalents = parseFloat(formData.get(`cash_equivalents_${i}`));
                data.trading_assets = parseFloat(formData.get(`trading_assets_${i}`));
                data.investment_securities = parseFloat(formData.get(`investment_securities_${i}`));
                data.loans_customers = parseFloat(formData.get(`loans_customers_${i}`));
                data.property_assets = parseFloat(formData.get(`property_assets_${i}`));
                data.other_assets = parseFloat(formData.get(`other_assets_${i}`));
                data.deposits_banks = parseFloat(formData.get(`deposits_banks_${i}`));
                data.deposits_customers = parseFloat(formData.get(`deposits_customers_${i}`));
                data.borrowings = parseFloat(formData.get(`borrowings_${i}`));
                data.other_liabilities = parseFloat(formData.get(`other_liabilities_${i}`));
                data.total_equity = parseFloat(formData.get(`total_equity_${i}`));
                data.market_cap = parseFloat(formData.get(`market_cap_${i}`));
                
                // Cash flow data
                data.cash_operating = parseFloat(formData.get(`cash_operating_${i}`));
                data.cash_investing = parseFloat(formData.get(`cash_investing_${i}`));
                data.cash_financing = parseFloat(formData.get(`cash_financing_${i}`));
                
                // Calculate derived metrics
                data.total_assets = data.cash_equivalents + data.trading_assets + data.investment_securities + 
                                  data.loans_customers + data.property_assets + data.other_assets;
                
                data.total_liabilities = data.deposits_banks + data.deposits_customers + data.borrowings + data.other_liabilities;
                
                data.operating_income = data.interest_income + data.net_fee_commission + data.trading_income + data.other_income;
                
                data.non_interest_expenses = data.personnel_expenses + data.depreciation + data.other_expenses;
                
                data.earning_assets = data.loans_customers + data.investment_securities + data.cash_equivalents;
                
                // Calculate ratios
                data.pcl_ratio = Math.abs(data.impairment_loss) / data.loans_customers;
                data.nim = (data.interest_income - Math.abs(data.interest_expense)) / data.earning_assets;
                data.efficiency_ratio = Math.abs(data.non_interest_expenses) / data.operating_income;
                data.leverage_ratio = data.total_equity / data.total_assets;
                data.debt_to_assets = data.total_liabilities / data.total_assets;
                data.roa = data.net_income / data.total_assets;
                data.roe = data.net_income / data.total_equity;
                data.loans_to_deposits = data.loans_customers / data.deposits_customers;
                
                financialData.push(data);
            }

            if (errors.length > 0) {
                errorText.textContent = errors.join(' ');
                errorMessage.classList.remove('hidden');
                resultsSection.classList.add('hidden');
                return;
            }

            // Calculate averages
            const avgPclRatio = financialData.reduce((sum, item) => sum + item.pcl_ratio, 0) / 3;
            const avgNim = financialData.reduce((sum, item) => sum + item.nim, 0) / 3;
            const avgEfficiencyRatio = financialData.reduce((sum, item) => sum + item.efficiency_ratio, 0) / 3;
            const avgLeverageRatio = financialData.reduce((sum, item) => sum + item.leverage_ratio, 0) / 3;
            const avgDebtToAssets = financialData.reduce((sum, item) => sum + item.debt_to_assets, 0) / 3;
            const avgRoa = financialData.reduce((sum, item) => sum + item.roa, 0) / 3;
            const avgRoe = financialData.reduce((sum, item) => sum + item.roe, 0) / 3;
            const avgLoansToDeposits = financialData.reduce((sum, item) => sum + item.loans_to_deposits, 0) / 3;

            // Create forecasts
            const forecastData = [];
            const latestData = financialData[2]; // Use Year 3 as base for forecasting
            
            for (let i = 1; i <= forecastYears; i++) {
                const forecast = {
                    year: 2025 + i,
                    // Apply growth rates with economic factors
                    loans_customers: latestData.loans_customers * (1 + gdpGrowth * 1.2 - inflationRate * 0.5),
                    deposits_customers: latestData.deposits_customers * (1 + gdpGrowth * 0.8 - inflationRate * 0.3),
                    net_income: latestData.net_income5050 * (1 + gdpGrowth * 1.1 - inflationRate * 0.4),
                    total_assets: latestData.total_assets * (1 + gdpGrowth * 0.9 - inflationRate * 0.2),
                    total_equity: latestData.total_equity * (1 + gdpGrowth * 0.7 - inflationRate * 0.1),
                    interest_income: latestData.interest_income * (1 + policyRate * 0.8 - inflationRate * 0.3),
                    interest_expense: latestData.interest_expense * (1 + policyRate * 0.6 - inflationRate * 0.2),
                    impairment_loss: latestData.impairment_loss * (1 + depreciationRate * 0.5 + inflationRate * 0.4)
                };
                
                // Calculate forecasted ratios
                forecast.pcl_ratio = Math.abs(forecast.impairment_loss) / forecast.loans_customers;
                forecast.nim = (forecast.interest_income - Math.abs(forecast.interest_expense)) / (forecast.loans_customers * 0.7 + forecast.total_assets * 0.3);
                forecast.roa = forecast.net_income / forecast.total_assets;
                forecast.roe = forecast.net_income / forecast.total_equity;
                forecast.loans_to_deposits = forecast.loans_customers / forecast.deposits_customers;
                
                forecastData.push(forecast);
            }

            // Interpretation
            let interpretation = '';
            
            // PCL Ratio interpretation
            if (avgPclRatio < 0.01) {
                interpretation += 'The bank exhibits <strong>excellent loan quality</strong> (PCL Ratio < 1%), indicating minimal credit losses.';
            } else if (avgPclRatio >= 0.01 && avgPclRatio <= 0.03) {
                interpretation += 'The bank shows <strong>good loan quality</strong> (PCL Ratio 1-3%), with manageable credit losses.';
            } else {
                interpretation += 'The bank shows <strong>concerning loan quality</strong> (PCL Ratio > 3%), indicating elevated credit risk.';
            }
            
            // NIM interpretation
            interpretation += `<br>Average NIM (${(avgNim * 100).toFixed(2)}%) shows profitability from lending; ${avgNim > 0.035 ? 'strong' : 'weak'} net interest income generation.`;
            
            // ROA and ROE interpretation
            interpretation += `<br>Average ROA (${(avgRoa * 100).toFixed(2)}%) and ROE (${(avgRoe * 100).toFixed(2)}%) indicate ${avgRoa > 0.01 ? 'satisfactory' : 'subpar'} profitability and efficiency.`;
            
            // Leverage interpretation
            interpretation += `<br>Average Leverage Ratio (${(avgLeverageRatio * 100).toFixed(2)}%) shows capital adequacy; ${avgLeverageRatio > 0.1 ? 'strong' : 'weak'} capital buffer against losses.`;
            
            // Loans to Deposits interpretation
            interpretation += `<br>Average Loans to Deposits Ratio (${(avgLoansToDeposits * 100).toFixed(2)}%) reflects liquidity risk; ${avgLoansToDeposits < 0.8 ? 'conservative' : 'aggressive'} lending relative to deposit base.`;

            // Economic context
            interpretation += `<br><br>Considering Ghana's economic context:`;
            interpretation += `<br>- Inflation rate: ${(inflationRate * 100).toFixed(1)}% may ${inflationRate > 0.15 ? 'increase' : 'moderate'} credit risk`;
            interpretation += `<br>- Currency depreciation: ${(depreciationRate * 100).toFixed(1)}% affects foreign currency loans`;
            interpretation += `<br>- Policy rate: ${(policyRate * 100).toFixed(1)}% influences borrowing costs and NIM`;

            // Warning for high risk
            let warning = '';
            if (avgPclRatio > 0.05 || avgNim < 0.02 || avgRoa < 0.005 || avgLeverageRatio < 0.08) {
                warning = 'Warning: Elevated credit risk detected. High PCL Ratio (>5%), low NIM (<2%), low ROA (<0.5%), or low LeverageThai Ratio (<8%) suggest potential financial stress.';
            }

            // Update results section
            resultsSection.innerHTML = `
                ${warning ? `
                <div id="warning-message" class="warning-message">
                    <p class="font-medium" id="warning-text"><i class="fas fa-exclamation-triangle mr-2"></i>${warning}</p>
                </div>
                ` : ''}
                <h3 class="text-xl font-bold text-gray-800 mb-4">Bank Credit Risk Results</h3>
                <div class="timeline-diagram" id="timeline-diagram">
Analysis Period: Year 1-Year 3
Forecast Period: ${forecastYears} years (2026-${2025 + forecastYears})
Economic Context: Inflation ${(inflationRate * 100).toFixed(1)}%, Policy Rate ${(policyRate * 100).toFixed(1)}%
                </div>
                <div class="text-center mb-6">
                    <p class="text-gray-600" id="credit-risk-years-text">Historical Credit Risk Metrics (Year 1-Year 3)</p>
                    <div class="metrics-grid">
                        <div class="result-box">
                            <p class="font-medium">Average PCL Ratio</p>
                            <p class="target-price" id="pcl-ratio-average-result">${(avgPclRatio * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Net Interest Margin (NIM)</p>
                            <p class="target-price" id="nim-average-result">${(avgNim * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Return on Assets (ROA)</p>
                            <p class="target-price" id="roa-average-result">${(avgRoa * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Return on Equity (ROE)</p>
                            <p class="target-price" id="roe-average-result">${(avgRoe * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Efficiency Ratio</p>
                            <p class="target-price" id="efficiency-ratio-average-result">${(avgEfficiencyRatio * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Leverage Ratio</p>
                            <p class="target-price" id="leverage-ratio-average-result">${(avgLeverageRatio * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Debt to Assets Ratio</p>
                            <p class="target-price" id="debt-to-assets-average-result">${(avgDebtToAssets * 100).toFixed(2)}%</p>
                        </div>
                        <div class="result-box">
                            <p class="font-medium">Average Loans to Deposits Ratio</p>
                            <p class="target-price" id="loans-to-deposits-average-result">${(avgLoansToDeposits * 100).toFixed(2)}%</p>
                        </div>
                    </div>
                    <div class="target-interpretation">
                        <p class="font-medium">Interpretation:</p>
                        <p id="target-interpretation-text">${interpretation}</p>
                    </div>
                </div>
                
                ${forecastYears > 0 ? `
                <h4 class="text-lg font-bold text-gray-800 mb-3">Forecasted Credit Risk Metrics</h4>
                <div style="overflow-x: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>PCL Ratio (%)</th>
                                <th>NIM (%)</th>
                                <th>ROA (%)</th>
                                <th>ROE (%)</th>
                                <th>Loans to Deposits (%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${forecastData.map(item => `
                            <tr>
                                <td>${item.year}</td>
                                <td>${(item.pcl_ratio * 100).toFixed(2)}</td>
                                <td>${(item.nim * 100).toFixed(2)}</td>
                                <td>${(item.roa * 100).toFixed(2)}</td>
                                <td>${(item.roe * 100).toFixed(2)}</td>
                                <td>${(item.loans_to_deposits * 100).toFixed(2)}</td>
                            </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ` : ''}
                
                <h4 class="text-lg font-bold text-gray-800 mb-3 mt-6">Historical Credit Risk Metrics by Year</h4>
                <div style="overflow-x: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>PCL Ratio (%)</th>
                                <th>NIM (%)</th>
                                <th>ROA (%)</th>
                                <th>ROE (%)</th>
                                <th>Efficiency Ratio (%)</th>
                                <th>Leverage Ratio (%)</th>
                                <th>Debt to Assets (%)</th>
                                <th>Loans to Deposits (%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${financialData.map((item, index) => `
                            <tr>
                                <td>Year ${index + 1}</td>
                                <td>${(item.pcl_ratio * 100).toFixed(2)}</td>
                                <td>${(item.nim * 100).toFixed(2)}</td>
                                <td>${(item.roa * 100).toFixed(2)}</td>
                                <td>${(item.roe * 100).toFixed(2)}</td>
                                <td>${(item.efficiency_ratio * 100).toFixed(2)}</td>
                                <td>${(item.leverage_ratio * 100).toFixed(2)}</td>
                                <td>${(item.debt_to_assets * 100).toFixed(2)}</td>
                                <td>${(item.loans_to_deposits * 100).toFixed(2)}</td>
                            </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                <button id="reset-calculator" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium flex items-center inline-block mt-6"><i class="fas fa-redo mr-2"></i> Calculate Another</button>
            `;
            resultsSection.classList.remove('hidden');
        });

        // Reset form
        form.addEventListener('reset', () => {
            resultsSection.classList.add('hidden');
            document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
            errorMessage.classList.add('hidden');
        });

        // Initialize reset button
        document.getElementById('results-section').addEventListener('click', (e) => {
            if (e.target.id === 'reset-calculator') {
                form.reset();
                resultsSection.classList.add('hidden');
                document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
                errorMessage.classList.add('hidden');
            }
        });
    </script>
</body>
</html>