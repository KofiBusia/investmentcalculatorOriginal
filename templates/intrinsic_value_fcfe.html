<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Cash Flow to Equity Calculator - Young Investor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5',
                        secondary: '#818cf8',
                        accent: '#a5b4fc',
                        dark: '#1e293b',
                        light: '#f8fafc',
                        success: '#10b981',
                        info: '#0ea5e9',
                        warning: '#f59e0b',
                        danger: '#ef4444'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #e6e9ff 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        .card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        .input-field {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #a5b4fc;
            box-shadow: 0 0 0 4px rgba(165, 180, 252, 0.25);
        }
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .nav-button {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background: white;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .nav-button.home {
            background: #4f46e5;
            color: white;
        }
        .nav-button.calculators {
            background: #10b981;
            color: white;
        }
        .nav-button i {
            margin-right: 8px;
        }
        .target-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4f46e5;
            margin: 10px 0;
        }
        .target-interpretation {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            background-color: #f0f9ff;
            border-left: 4px solid #0ea5e9;
        }
        .formula {
            font-family: 'Courier New', monospace;
            background-color: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background-color: #f8fafc;
            font-weight: 600;
            color: #1e293b;
        }
        td {
            color: #374151;
        }
        .warning-message {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #78350f;
        }
        .timeline-diagram {
            font-family: 'Courier New', monospace;
            background-color: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #e2e8f0;
            white-space: pre;
        }
        .result-box {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4f46e5;
        }
    </style>
</head>
<body class="text-gray-800">
    <header class="gradient-bg text-white py-8 px-4 md:px-8">
        <div class="max-w-6xl mx-auto">
            <nav class="hidden md:flex justify-between items-center mb-6">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-white hover:text-indigo-200 transition-colors">Home</a>
                    <a href="/#calculators" class="text-white font-medium border-b-2 border-white">Calculators</a>
                    <a href="/help" class="text-white hover:text-indigo-200 transition-colors">Help Center</a>
                    <a href="/articles" class="text-white hover:text-indigo-200 transition-colors">Resources</a>
                </div>
                <a href="/help" class="bg-white text-primary px-4 py-2 rounded-lg font-medium hover:bg-indigo-50 transition-colors">Get Started</a>
            </nav>
            <div class="max-w-3xl">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Free Cash Flow to Equity Calculator</h1>
                <p class="text-xl md:text-2xl text-indigo-100 mb-6">Calculate Free Cash Flow to Equity (FCFE) for 3 to 5 years to assess cash available to shareholders.</p>
                <div class="flex flex-wrap gap-3">
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        <span>Beginner Friendly</span>
                    </div>
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-download mr-2"></i>
                        <span>Downloadable Guide</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4 py-8">
        <div class="nav-buttons mb-6">
            <a href="/" class="nav-button home"><i class="fas fa-home"></i> Return to Home</a>
            <a href="/#calculators" class="nav-button calculators"><i class="fas fa-calculator"></i> Other Calculators</a>
        </div>

        <div class="card p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Calculate Free Cash Flow to Equity</h2>
            <p class="text-gray-600 mb-6">Enter financial data for 3 to 5 years to calculate Free Cash Flow to Equity (FCFE) and intrinsic value per share. All monetary values in Ghanaian Cedi (GHS). Example: Use data for Access Bank Ghana (174 million shares).</p>
            <div class="formula">
                <p class="text-lg font-semibold">FCFE Formula</p>
                <p class="text-xl mt-2">FCFE = Net Income + Non-Cash Charges - Capex - Change in Working Capital + Net Borrowing</p>
                <p class="text-sm mt-2 text-gray-600">Where Net Income is profit after taxes, Non-Cash Charges are depreciation and amortization, Capex is capital expenditures, Change in Working Capital is the year-over-year change in current assets minus liabilities, and Net Borrowing is new debt minus repayments.</p>
            </div>
            <form id="fcfe-form" class="space-y-6">
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Select Number of Years</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Number of Years</label>
                            <select name="num_years" id="num-years" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                                <option value="3">3 Years</option>
                                <option value="4">4 Years</option>
                                <option value="5">5 Years</option>
                            </select>
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Choose the number of years (3 to 5) for FCFE calculation.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="num_years-error">Please select a valid number of years.</div>
                        </div>
                    </div>
                </div>
                <div id="annual-inputs" class="space-y-6"></div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Parameters for Intrinsic Value Per Share</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Cost of Equity (%)</label>
                            <input type="number" step="any" name="cost_equity" id="cost_equity" placeholder="e.g., 15" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Required return for equity (e.g., CAPM: risk-free rate + beta × equity risk premium). Typical for Ghana: 12-20%.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="cost_equity-error">Please enter a valid positive number greater than growth rate.</div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Perpetual Growth Rate (%)</label>
                            <input type="number" step="any" name="growth_rate" id="growth_rate" placeholder="e.g., 3" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Long-term growth rate for FCFE after forecast (e.g., Ghana GDP growth ~3-5%).</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="growth_rate-error">Please enter a valid number less than cost of equity.</div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Start Year</label>
                            <input type="number" step="1" name="start_year" id="start_year" placeholder="e.g., 2025" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">The year for the first FCFE input (Year 1). For standard DCF, set to current year. Use with Valuation Year for backtesting.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="start_year-error">Please enter a valid year.</div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Valuation Year</label>
                            <input type="number" step="1" name="valuation_year" id="valuation_year" placeholder="e.g., 2025" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">The present valuation year for discounting cash flows (CFA standard). For standard DCF, set to current year. Use with Start Year for backtesting.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="valuation_year-error">Please enter a valid year.</div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Shares Outstanding</label>
                            <input type="number" step="any" name="shares_outstanding" id="shares_outstanding" placeholder="e.g., 174000000" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Total shares outstanding (e.g., 174M for Access Bank Ghana). Find on gse.com.gh or Yahoo Finance.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="shares_outstanding-error">Please enter a valid positive number.</div>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Current Stock Price (GHS)</label>
                            <input type="number" step="any" name="current_price" id="current_price" placeholder="e.g., 5.50" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2">
                                <i class="fas fa-info-circle text-gray-500"></i>
                                <span class="tooltiptext">Current market price per share (e.g., GHS 5.50 for Access Bank Ghana). Find on gse.com.gh or Yahoo Finance.</span>
                            </div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="current_price-error">Please enter a valid positive number.</div>
                        </div>
                    </div>
                </div>
                <div class="flex gap-4">
                    <button type="submit" id="calculate-btn" class="px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors"><i class="fas fa-calculator mr-2"></i> Calculate</button>
                    <button type="reset" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors"><i class="fas fa-eraser mr-2"></i> Clear</button>
                </div>
            </form>
            <div id="error-message" class="mt-6 hidden">
                <div class="bg-red-50 p-4 rounded-lg">
                    <p class="text-red-700 font-medium" id="error-text"></p>
                </div>
            </div>
            <div id="results-section" class="mt-8 hidden">
                <div id="warning-message" class="warning-message hidden">
                    <p class="font-medium" id="warning-text"><i class="fas fa-exclamation-triangle mr-2"></i></p>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">Free Cash Flow to Equity Results</h3>
                <div class="timeline-diagram" id="timeline-diagram"></div>
                <div class="text-center mb-6">
                    <p class="text-gray-600" id="fcfe-years-text"></p>
                    <div class="target-price" id="fcfe-average-result"></div>
                    <div class="target-price" id="terminal-value-result"></div>
                    <div class="target-price" id="total-value-result"></div>
                    <div class="target-price" id="intrinsic-value-result"></div>
                    <div class="target-interpretation">
                        <p class="font-medium">Interpretation:</p>
                        <p id="target-interpretation-text"></p>
                        <p class="font-medium mt-4">Valuation Comparison:</p>
                        <p id="valuation-comparison-text"></p>
                    </div>
                </div>
                <h4 class="text-lg font-bold text-gray-800 mb-3">FCFE Calculation Details</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Net Income (GHS)</th>
                            <th>Non-Cash Charges (GHS)</th>
                            <th>Capex (GHS)</th>
                            <th>Change in WC (GHS)</th>
                            <th>Net Borrowing (GHS)</th>
                            <th>FCFE (GHS)</th>
                        </tr>
                    </thead>
                    <tbody id="fcfe-results-table"></tbody>
                </table>
                <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">Discounted Cash Flow (DCF) Table</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Forecast Year</th>
                            <th>Actual Year</th>
                            <th>Time Period</th>
                            <th>FV FCFE (GHS)</th>
                            <th>PV FCFE (GHS)</th>
                        </tr>
                    </thead>
                    <tbody id="dcf-results-table"></tbody>
                </table>
                <p class="text-gray-600 mt-4">Use these FCFE values in DCF models or divide by shares outstanding to get FCFE per share.</p>
                <button id="reset-calculator" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium flex items-center inline-block mt-6"><i class="fas fa-redo mr-2"></i> Calculate Another</button>
            </div>
        </div>

        <div class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Understanding Free Cash Flow to Equity</h2>
            <p class="text-gray-600 mb-6">Free Cash Flow to Equity (FCFE) measures the cash available to shareholders after all expenses, reinvestments, and debt obligations are met. It's a key metric for valuing stocks using Discounted Cash Flow (DCF) models or assessing dividend potential.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="bg-blue-50 p-5 rounded-lg">
                    <div class="text-3xl font-bold text-blue-700 mb-2">Positive FCFE</div>
                    <h3 class="font-bold text-gray-800 mb-2">FCFE > 0</h3>
                    <p class="text-gray-600">The company generates surplus cash for shareholders, potentially supporting dividends or stock buybacks.</p>
                </div>
                <div class="bg-orange-50 p-5 rounded-lg">
                    <div class="text-3xl font-bold text-orange-700 mb-2">Negative FCFE</div>
                    <h3 class="font-bold text-gray-800 mb-2">FCFE ≤ 0</h3>
                    <p class="text-gray-600">The company may be reinvesting heavily or facing cash flow challenges, limiting shareholder payouts.</p>
                </div>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">How to Use the FCFE Calculator</h3>
            <ol class="list-decimal pl-6 space-y-4">
                <li><strong>Select Number of Years</strong><p>Choose 3, 4, or 5 years for your FCFE forecast.</p></li>
                <li><strong>Enter Net Income</strong><p>Input the profit after taxes from the income statement for each year (e.g., from Yahoo Finance or gse.com.gh).</p></li>
                <li><strong>Enter Non-Cash Charges</strong><p>Provide depreciation and amortization from the cash flow statement.</p></li>
                <li><strong>Enter Capex</strong><p>Provide capital expenditures from the cash flow statement.</p></li>
                <li><strong>Enter Change in Working Capital</strong><p>Input the year-over-year change in current assets minus liabilities.</p></li>
                <li><strong>Enter Net Borrowing</strong><p>Provide new debt minus repayments from the cash flow statement.</p></li>
                <li><strong>Enter Cost of Equity, Perpetual Growth Rate, Start Year, Valuation Year, Shares Outstanding, and Current Stock Price</strong><p>Input these for DCF-based intrinsic value per share calculation and comparison with the current price. For standard DCF, set Start Year and Valuation Year to the current year (e.g., 2025). Use different years for backtesting past cash flows, which will be compounded forward.</p></li>
                <li><strong>Calculate and Review</strong><p>Click "Calculate" to compute FCFE for each year, intrinsic value per share, and compare with the current price. Compare intrinsic value to current stock price for valuation insights.</p></li>
            </ol>
            <div class="timeline-diagram">
Scenario: Future Cash Flows (Standard DCF)
Valuation Year: 2025
Cash Flows: 2025 [Year 1] — 2026 [Year 2] — 2027 [Year 3] — Terminal [2028+]

Scenario: Past Cash Flows (Backtesting)
Valuation Year: 2028
Cash Flows: 2025 [Year 1] — 2026 [Year 2] — 2027 [Year 3] — Terminal [2028+]
            </div>
            <div class="mt-8">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Key Applications of FCFE</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>Valuing stocks using Discounted Cash Flow (DCF) models</li>
                    <li>Assessing a company's ability to pay dividends or buy back shares</li>
                    <li>Evaluating financial flexibility for shareholders</li>
                    <li>Comparing equity cash flows across companies</li>
                </ul>
            </div>
            <div class="flex flex-wrap gap-3 mt-6">
                <a href="/download_guide" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium flex items-center"><i class="fas fa-download mr-2"></i> Download Guide</a>
                <a href="/tutorial" class="px-4 py-2 bg-primary text-white rounded-lg font-medium flex items-center"><i class="fas fa-play-circle mr-2"></i> Watch Tutorial</a>
            </div>
        </div>

        <div class="card p-6 mb-8">
            <button type="button" onclick="toggleHelpSection()" class="w-full text-left text-2xl font-bold text-gray-800 flex justify-between items-center focus:outline-none">
                <span>How to Find FCFE Data</span>
                <span id="help-toggle-icon" class="text-gray-500 text-xl">➕</span>
            </button>
            <div id="help-section" class="hidden mt-4 text-gray-600">
                <p class="mb-2">To calculate <strong>Free Cash Flow to Equity (FCFE)</strong>, you need accurate financial data. Here's how to find the required information for global and Ghanaian companies:</p>
                <ol class="list-decimal pl-6 space-y-4">
                    <li><strong>Net Income</strong><p>Find in the income statement:</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Search the stock ticker (e.g., ABG for Access Bank Ghana), go to "Financials" > "Income Statement."</li><li><strong>gse.com.gh</strong>: Check financial statements for GSE-listed companies.</li><li><strong>Annual Reports</strong>: Access via company websites or annualreportsghana.com.</li></ul></li>
                    <li><strong>Non-Cash Charges</strong><p>Find depreciation and amortization in the cash flow statement under "Operating Activities" (added back to net income).</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Look under "Cash Flow" > "Operating Activities."</li><li><strong>afx.kwayisi.org/gse/</strong>: View data for GSE companies.</li></ul></li>
                    <li><strong>Capex</strong><p>Found in the cash flow statement under "Investing Activities."</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Look under "Cash Flow" > "Investing Activities."</li><li><strong>afx.kwayisi.org/gse/</strong>: View data for GSE companies.</li></ul></li>
                    <li><strong>Change in Working Capital</strong><p>Calculate as the year-over-year change in current assets minus current liabilities, found in the balance sheet or cash flow statement.</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Check "Cash Flow" or "Balance Sheet."</li><li><strong>Company Reports</strong>: Look for working capital details.</li></ul></li>
                    <li><strong>Net Borrowing</strong><p>Calculate as new debt issuances minus debt repayments, found in the cash flow statement under "Financing Activities."</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Look under "Cash Flow" > "Financing Activities."</li><li><strong>gse.com.gh</strong>: Check financial statements.</li></ul></li>
                    <li><strong>Cost of Equity</strong><p>Estimate using CAPM: Risk-free rate + Beta × Equity Risk Premium.</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Risk-free rate</strong>: Ghana Treasury Bill rates from bog.gov.gh (e.g., 91-day ~10%, 364-day ~13% as of August 2025).</li><li><strong>Beta</strong>: From Yahoo Finance or Bloomberg (for Access Bank Ghana, often around 1 for banks if not available).</li><li><strong>Equity Risk Premium</strong>: From Damodaran (nyu.edu) ~16.35% for Ghana in 2025.</li></ul></li>
                    <li><strong>Perpetual Growth Rate</strong><p>Use long-term GDP growth or inflation rate for Ghana (~3-5%, from World Bank or IMF projections).</p></li>
                    <li><strong>Shares Outstanding</strong><p>Find in financial statements or key statistics.</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Under "Statistics."</li><li><strong>gse.com.gh</strong>: In company profiles (e.g., 174M for Access Bank Ghana).</li></ul></li>
                    <li><strong>Current Stock Price</strong><p>Find the current market price per share.</p><ul class="list-disc list-inside ml-6 space-y-2"><li><strong>Yahoo Finance</strong>: Under "Summary" or "Quote."</li><li><strong>gse.com.gh</strong>: Check market data for GSE-listed companies.</li></ul></li>
                    <li><strong>Tips</strong><ul class="list-disc list-inside ml-6 space-y-2"><li>Verify data from multiple sources for accuracy.</li><li>For Ghanaian companies, check gse.com.gh for announcements affecting financials.</li><li>Use historical data for past years and analyst estimates for future projections (Yahoo Finance "Analysis" tab).</li></ul></li>
                </ol>
                <p class="mt-4"><strong>Examples</strong>:</p>
                <ul class="list-disc list-inside ml-6 space-y-2">
                    <li><strong>Access Bank Ghana (ABG)</strong>: Net Income = GHS 217.5M, Non-Cash Charges = GHS 100K, Capex = GHS 500K, Change in WC = GHS 200K, Net Borrowing = GHS 300K; Cost of Equity = 15%, Perpetual Growth = 3%, Shares = 174M, Current Price = GHS 5.50 (from gse.com.gh).</li>
                    <li><strong>JPMorgan Chase (JPM)</strong>: Net Income = $40M, Non-Cash Charges = $3M, Capex = $5M, Change in WC = $2M, Net Borrowing = $3M; Cost of Equity = 10%, Perpetual Growth = 2%, Shares = 2.9B, Current Price = $200 (from Yahoo Finance).</li>
                </ul>
            </div>
        </div>

        <div class="nav-buttons mt-6">
            <a href="/" class="nav-button home"><i class="fas fa-home"></i> Return to Home</a>
            <a href="/#calculators" class="nav-button calculators"><i class="fas fa-calculator"></i> Other Calculators</a>
        </div>
    </div>

    <footer class="bg-dark text-white py-12">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">InvestIQ</h3>
                    <p class="text-gray-400 mb-4">Empowering investors with advanced tools, insights, and calculators to make smarter financial decisions.</p>
                    <div class="flex gap-3">
                        <a href="#" class="w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors"><i class="fab fa-x-twitter"></i></a>
                        <a href="#" class="w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center hover:bg-primary transition-colors"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/#calculators" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-calculator mr-2"></i> Calculators</a></li>
                        <li><a href="/help" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-question-circle mr-2"></i> Help Center</a></li>
                        <li><a href="/about" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-info-circle mr-2"></i> About Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="/non_portfolio_risk_help" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-book mr-2"></i> Non-Portfolio Risk Guide</a></li>
                        <li><a href="/portfolio_risk_help" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-book mr-2"></i> Portfolio Risk Guide</a></li>
                        <li><a href="/bond_risk_help" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-book mr-2"></i> Bond Risk Guide</a></li>
                        <li><a href="/contact" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-envelope mr-2"></i> Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Contact</h3>
                    <ul class="space-y-2">
                        <li><a href="mailto:info@cleanvisionhr.com" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-envelope mr-2"></i> info@cleanvisionhr.com</a></li>
                        <li><a href="tel:+233503566913" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-phone mr-2"></i> +233 50 356 6913</a></li>
                        <li><a href="/contact" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-map-marker-alt mr-2"></i> Contact Form</a></li>
                        <li><a href="/faq" class="text-gray-400 hover:text-white transition-colors flex items-center"><i class="fas fa-question-circle mr-2"></i> FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-6 text-center">
                <p class="text-gray-400">© 2025 InvestIQ. All rights reserved. | <a href="/privacy" class="text-gray-400 hover:text-white">Privacy Policy</a> | <a href="/terms" class="text-gray-400 hover:text-white">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <button id="backToTop" class="back-to-top w-12 h-12 bg-primary text-white rounded-full shadow-lg flex items-center justify-center">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Number formatting function
        function formatNumber(value) {
            return parseFloat(value).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        // Back-to-top button functionality
        const backToTopBtn = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            backToTopBtn.classList.toggle('visible', window.scrollY > 300);
        });
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Form elements
        const numYearsSelect = document.getElementById('num-years');
        const annualInputs = document.getElementById('annual-inputs');
        const form = document.getElementById('fcfe-form');
        const resultsSection = document.getElementById('results-section');
        const resetBtn = document.getElementById('reset-calculator');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');
        const warningMessage = document.getElementById('warning-message');
        const warningText = document.getElementById('warning-text');
        const timelineDiagram = document.getElementById('timeline-diagram');
        const fcfeYearsText = document.getElementById('fcfe-years-text');
        const fcfeAverageResult = document.getElementById('fcfe-average-result');
        const terminalValueResult = document.getElementById('terminal-value-result');
        const totalValueResult = document.getElementById('total-value-result');
        const intrinsicValueResult = document.getElementById('intrinsic-value-result');
        const targetInterpretationText = document.getElementById('target-interpretation-text');
        const valuationComparisonText = document.getElementById('valuation-comparison-text');
        const fcfeResultsTable = document.getElementById('fcfe-results-table');
        const dcfResultsTable = document.getElementById('dcf-results-table');

        let yearCount = parseInt(numYearsSelect.value) || 5;
        const maxYears = 5;

        // Input field definitions
        const inputFields = [
            { name: 'net_income', label: 'Net Income (GHS)', placeholder: 'e.g., 150000000', tooltip: 'Profit after taxes from the income statement (e.g., 217.5M GHS for Access Bank 2024). Find on Yahoo Finance or gse.com.gh.' },
            { name: 'non_cash', label: 'Non-Cash Charges (GHS)', placeholder: 'e.g., 100000', tooltip: 'Non-cash expenses like depreciation and amortization from the cash flow statement (e.g., 100K GHS).' },
            { name: 'capex', label: 'Capex (GHS)', placeholder: 'e.g., 400000', tooltip: 'Capital expenditures from cash flow statement (e.g., 500K GHS).' },
            { name: 'change_wc', label: 'Change in Working Capital (GHS)', placeholder: 'e.g., 150000', tooltip: 'Year-over-year change in current assets minus liabilities (e.g., 200K GHS increase).' },
            { name: 'net_borrowing', label: 'Net Borrowing (GHS)', placeholder: 'e.g., 250000', tooltip: 'New debt minus repayments from cash flow statement (e.g., 300K GHS).' }
        ];

        // Render dynamic year inputs
        function renderYearInputs() {
            annualInputs.innerHTML = '';
            for (let i = 1; i <= maxYears; i++) {
                const yearSection = document.createElement('div');
                yearSection.className = `bg-indigo-50 p-4 rounded-lg year-section ${i > yearCount ? 'hidden' : ''}`;
                yearSection.id = `year-${i}-section`;
                yearSection.setAttribute('data-year', i);
                yearSection.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Year ${i}</h3>
                        ${i > 1 ? `<button type="button" class="remove-year text-red-500 hover:text-red-700" data-year="${i}"><i class="fas fa-trash"></i></button>` : ''}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 dynamic-inputs"></div>
                `;
                const dynamicInputs = yearSection.querySelector('.dynamic-inputs');
                inputFields.forEach(field => {
                    const { name, label, placeholder, tooltip } = field;
                    dynamicInputs.insertAdjacentHTML('beforeend', `
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">${label}</label>
                            <input type="number" step="any" name="${name}_${i}" placeholder="${placeholder}" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm">
                            <div class="tooltip mt-2"><i class="fas fa-info-circle text-gray-500"></i><span class="tooltiptext">${tooltip}</span></div>
                            <div class="form-error text-danger text-sm mt-2 hidden" id="${name}_${i}-error">Please enter a valid number.</div>
                        </div>
                    `);
                });
                annualInputs.appendChild(yearSection);
            }
            document.querySelectorAll('.remove-year').forEach(btn => {
                btn.addEventListener('click', () => {
                    const year = parseInt(btn.getAttribute('data-year'));
                    document.getElementById(`year-${year}-section`).remove();
                    yearCount--;
                    numYearsSelect.value = yearCount;
                    toggleYearSections();
                });
            });
        }

        // Toggle year sections based on selected number of years
        function toggleYearSections() {
            yearCount = parseInt(numYearsSelect.value);
            const yearSections = document.querySelectorAll('.year-section');
            yearSections.forEach((section, index) => {
                const year = index + 1;
                section.classList.toggle('hidden', year > yearCount);
                if (year > yearCount) {
                    section.querySelectorAll('input[type="number"]').forEach(input => input.value = '');
                }
            });
        }

        // Toggle help section
        function toggleHelpSection() {
            const helpSection = document.getElementById('help-section');
            const toggleIcon = document.getElementById('help-toggle-icon');
            helpSection.classList.toggle('hidden');
            toggleIcon.textContent = helpSection.classList.contains('hidden') ? '➕' : '➖';
        }

        // Form validation and calculation
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
            errorMessage.classList.add('hidden');

            // Collect form data
            const numYears = parseInt(numYearsSelect.value);
            const costEquity = parseFloat(form.cost_equity.value) / 100;
            const growthRate = parseFloat(form.growth_rate.value) / 100;
            const startYear = parseInt(form.start_year.value);
            const valuationYear = parseInt(form.valuation_year.value);
            const sharesOutstanding = parseFloat(form.shares_outstanding.value);
            const currentPrice = parseFloat(form.current_price.value);

            // Validate inputs
            let errors = [];
            if (isNaN(numYears) || numYears < 3 || numYears > 5) {
                errors.push('Please select a valid number of years (3–5).');
                document.getElementById('num_years-error').classList.remove('hidden');
            }
            if (isNaN(costEquity) || costEquity <= 0) {
                errors.push('Cost of Equity must be a positive number.');
                document.getElementById('cost_equity-error').classList.remove('hidden');
            }
            if (isNaN(growthRate) || growthRate < 0 || growthRate >= costEquity) {
                errors.push('Perpetual Growth Rate must be a non-negative number less than Cost of Equity.');
                document.getElementById('growth_rate-error').classList.remove('hidden');
            }
            if (isNaN(startYear) || startYear < 2000) {
                errors.push('Start Year must be a valid year.');
                document.getElementById('start_year-error').classList.remove('hidden');
            }
            if (isNaN(valuationYear) || valuationYear < 2000) {
                errors.push('Valuation Year must be a valid year.');
                document.getElementById('valuation_year-error').classList.remove('hidden');
            }
            if (isNaN(sharesOutstanding) || sharesOutstanding <= 0) {
                errors.push('Shares Outstanding must be a positive number.');
                document.getElementById('shares_outstanding-error').classList.remove('hidden');
            }
            if (isNaN(currentPrice) || currentPrice < 0) {
                errors.push('Current Stock Price must be a non-negative number.');
                document.getElementById('current_price-error').classList.remove('hidden');
            }

            const fcfeData = [];
            for (let i = 1; i <= numYears; i++) {
                const netIncome = parseFloat(form[`net_income_${i}`]?.value);
                const nonCash = parseFloat(form[`non_cash_${i}`]?.value);
                const capex = parseFloat(form[`capex_${i}`]?.value);
                const changeWc = parseFloat(form[`change_wc_${i}`]?.value);
                const netBorrowing = parseFloat(form[`net_borrowing_${i}`]?.value);

                if ([netIncome, nonCash, capex, changeWc, netBorrowing].some(val => isNaN(val))) {
                    errors.push(`Please enter valid numbers for Year ${i}.`);
                    if (isNaN(netIncome)) document.getElementById(`net_income_${i}-error`).classList.remove('hidden');
                    if (isNaN(nonCash)) document.getElementById(`non_cash_${i}-error`).classList.remove('hidden');
                    if (isNaN(capex)) document.getElementById(`capex_${i}-error`).classList.remove('hidden');
                    if (isNaN(changeWc)) document.getElementById(`change_wc_${i}-error`).classList.remove('hidden');
                    if (isNaN(netBorrowing)) document.getElementById(`net_borrowing_${i}-error`).classList.remove('hidden');
                } else {
                    const fcfe = netIncome + nonCash - capex - changeWc + netBorrowing;
                    fcfeData.push({
                        year: i,
                        net_income: netIncome,
                        non_cash_charges: nonCash,
                        capex: capex,
                        change_wc: changeWc,
                        net_borrowing: netBorrowing,
                        fcfe: fcfe
                    });
                }
            }

            if (errors.length > 0) {
                errorText.textContent = errors.join(' ');
                errorMessage.classList.remove('hidden');
                resultsSection.classList.add('hidden');
                return;
            }

            // Calculate DCF and other values
            const timePeriod = valuationYear - startYear;
            const dcfTable = [];
            let sumPvFcfe = 0;
            fcfeData.forEach((item, index) => {
                const forecastYear = index + 1;
                const actualYear = startYear + index;
                const t = timePeriod + forecastYear;
                const pvFcfe = item.fcfe / Math.pow(1 + costEquity, t);
                sumPvFcfe += pvFcfe;
                dcfTable.push({
                    forecast_year: forecastYear,
                    actual_year: actualYear,
                    time_period: t,
                    fv_fcfe: item.fcfe,
                    pv_fcfe: pvFcfe
                });
            });

            // Terminal value
            const lastFcfe = fcfeData[fcfeData.length - 1].fcfe;
            const terminalValue = (lastFcfe * (1 + growthRate)) / (costEquity - growthRate);
            const pvTerminalValue = terminalValue / Math.pow(1 + costEquity, numYears + timePeriod);
            const totalValue = sumPvFcfe + pvTerminalValue;
            const intrinsicValuePerShare = totalValue / sharesOutstanding;
            const avgFcfe = fcfeData.reduce((sum, item) => sum + item.fcfe, 0) / numYears;

            // Warning for negative values
            let warning = '';
            if (fcfeData.some(item => item.fcfe < 0)) {
                warning = 'Warning: Negative FCFE values detected. This may indicate reinvestment needs or financial challenges.';
                warningMessage.classList.remove('hidden');
                warningText.innerHTML = `<i class="fas fa-exclamation-triangle mr-2"></i>${warning}`;
            } else {
                warningMessage.classList.add('hidden');
            }

            // Update timeline diagram
            const scenario = startYear < valuationYear ? 'Past Cash Flows' : 'Future Cash Flows';
            timelineDiagram.textContent = `
Scenario: ${scenario}
Valuation Year: ${valuationYear}
Cash Flows: ${startYear} [Year 1] — ${startYear + 1} [Year 2] — ${startYear + 2} [Year 3]${numYears > 3 ? ` — ${startYear + 3} [Year 4]` : ''}${numYears > 4 ? ` — ${startYear + 4} [Year 5]` : ''} — Terminal [${startYear + numYears}+]
            `;

            // Update results
            fcfeYearsText.textContent = `FCFE for ${numYears} Years`;
            fcfeAverageResult.textContent = `GHS ${formatNumber(avgFcfe)} (Average FCFE)`;
            terminalValueResult.textContent = `GHS ${formatNumber(terminalValue)} (Terminal Value)`;
            totalValueResult.textContent = `GHS ${formatNumber(totalValue)} (Total Value)`;
            intrinsicValueResult.textContent = `GHS ${formatNumber(intrinsicValuePerShare)} (Intrinsic Value Per Share)`;
            targetInterpretationText.innerHTML = `The intrinsic value per share of GHS ${formatNumber(intrinsicValuePerShare)} suggests the stock's fair value based on the provided cash flows and assumptions.`;
            valuationComparisonText.innerHTML = `
                Current Price: GHS ${formatNumber(currentPrice)}<br>
                ${intrinsicValuePerShare > currentPrice ? 
                    `The stock is potentially <strong>undervalued</strong> (Intrinsic Value GHS ${formatNumber(intrinsicValuePerShare)} > Current Price GHS ${formatNumber(currentPrice)}).` :
                intrinsicValuePerShare < currentPrice ?
                    `The stock is potentially <strong>overvalued</strong> (Intrinsic Value GHS ${formatNumber(intrinsicValuePerShare)} < Current Price GHS ${formatNumber(currentPrice)}).` :
                    `The stock is <strong>fairly valued</strong> (Intrinsic Value GHS ${formatNumber(intrinsicValuePerShare)} = Current Price GHS ${formatNumber(currentPrice)}).`
                }
            `;

            // Update FCFE table
            fcfeResultsTable.innerHTML = fcfeData.map(item => `
                <tr>
                    <td>Year ${item.year}</td>
                    <td>GHS ${formatNumber(item.net_income)}</td>
                    <td>GHS ${formatNumber(item.non_cash_charges)}</td>
                    <td>GHS ${formatNumber(item.capex)}</td>
                    <td>GHS ${formatNumber(item.change_wc)}</td>
                    <td>GHS ${formatNumber(item.net_borrowing)}</td>
                    <td><strong>GHS ${formatNumber(item.fcfe)}</strong></td>
                </tr>
            `).join('');

            // Update DCF table
            dcfResultsTable.innerHTML = dcfTable.map(item => `
                <tr>
                    <td>${item.forecast_year}</td>
                    <td>${item.actual_year}</td>
                    <td>${item.time_period}</td>
                    <td>GHS ${formatNumber(item.fv_fcfe)}</td>
                    <td>GHS ${formatNumber(item.pv_fcfe)}</td>
                </tr>
            `).join('');

            resultsSection.classList.remove('hidden');
        });

        // Reset form
        form.addEventListener('reset', () => {
            yearCount = 5;
            numYearsSelect.value = '5';
            resultsSection.classList.add('hidden');
            document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
            errorMessage.classList.add('hidden');
            warningMessage.classList.add('hidden');
            form.start_year.value = '';
            form.valuation_year.value = '';
            form.cost_equity.value = '';
            form.growth_rate.value = '';
            form.shares_outstanding.value = '';
            form.current_price.value = '';
            renderYearInputs();
        });

        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                form.reset();
                yearCount = 5;
                numYearsSelect.value = '5';
                resultsSection.classList.add('hidden');
                document.querySelectorAll('.form-error').forEach(el => el.classList.add('hidden'));
                errorMessage.classList.add('hidden');
                warningMessage.classList.add('hidden');
                form.start_year.value = '';
                form.valuation_year.value = '';
                form.cost_equity.value = '';
                form.growth_rate.value = '';
                form.shares_outstanding.value = '';
                form.current_price.value = '';
                renderYearInputs();
            });
        }

        // Initialize inputs on load
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.addEventListener('input', () => {
                    if (input.value === '' || isNaN(parseFloat(input.value))) {
                        input.setCustomValidity('Please enter a valid number.');
                        input.reportValidity();
                    } else {
                        input.setCustomValidity('');
                    }
                });
            });
            numYearsSelect.addEventListener('change', toggleYearSections);
            renderYearInputs();
        });
    </script>
</body>
</html>