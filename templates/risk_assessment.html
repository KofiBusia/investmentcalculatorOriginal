```html
<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1910810542133525"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Assessment Calculator - Young Investor Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5',
                        secondary: '#818cf8',
                        accent: '#a5b4fc',
                        dark: '#1e293b',
                        light: '#f8fafc',
                        success: '#10b981',
                        info: '#0ea5e9',
                        warning: '#f59e0b',
                        danger: '#ef4444'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --header-height: 70px;
            --sidebar-width: 300px;
        }
        
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #e6e9ff 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            border-color: #a5b4fc;
            box-shadow: 0 0 0 4px rgba(165, 180, 252, 0.25);
        }
        
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        
        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .step-container {
                flex-direction: column;
            }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .nav-button {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background: white;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }
        
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .nav-button.home {
            background: #4f46e5;
            color: white;
        }
        
        .nav-button.calculators {
            background: #10b981;
            color: white;
        }
        
        .nav-button i {
            margin-right: 8px;
        }
    </style>
</head>
<body class="text-gray-800">
    <!-- Header -->
    <header class="gradient-bg text-white py-8 px-4 md:px-8">
        <div class="max-w-6xl mx-auto">
            <nav class="hidden md:flex justify-between items-center mb-6">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-white hover:text-indigo-200 transition-colors">Home</a>
                    <a href="/#calculators" class="text-white font-medium border-b-2 border-white">Calculators</a>
                    <a href="/help" class="text-white hover:text-indigo-200 transition-colors">Help Center</a>
                    <a href="/articles" class="text-white hover:text-indigo-200 transition-colors">Resources</a>
                </div>
                <a href="#" class="bg-white text-primary px-4 py-2 rounded-lg font-medium hover:bg-indigo-50 transition-colors">
                    Get Started
                </a>
            </nav>
            <div class="max-w-3xl">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Risk Assessment Calculator</h1>
                <p class="text-xl md:text-2xl text-indigo-100 mb-6">
                    Evaluate your portfolio's risk profile with scenario analysis and stress testing, compliant with NPRA guidelines for Ghana.
                </p>
                <div class="flex flex-wrap gap-3">
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>
                        <span>Beginner Friendly</span>
                    </div>
                    <div class="bg-white/20 px-4 py-2 rounded-full flex items-center">
                        <i class="fas fa-download mr-2"></i>
                        <span>Downloadable Guide</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Navigation Buttons -->
        <div class="nav-buttons">
            <a href="https://younginvestorcalculator.com/" class="nav-button home">
                <i class="fas fa-home"></i> Return to Home
            </a>
            <a href="https://younginvestorcalculator.com/#calculators" class="nav-button calculators">
                <i class="fas fa-calculator"></i> Other Calculators
            </a>
        </div>

        <!-- Calculator Form -->
        <div class="card p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Calculate Portfolio Risk</h2>
            <p class="text-gray-600 mb-6">Enter your portfolio allocations to assess risk metrics and ensure compliance with NPRA guidelines.</p>
            {% if npra_alerts %}
                {% for alert in npra_alerts %}
                    <div class="bg-{{ 'green' if alert.type == 'success' else 'red' }}-50 p-4 rounded-lg mb-6">
                        <p class="text-{{ 'green' if alert.type == 'success' else 'red' }}-700">{{ alert.message }}</p>
                    </div>
                {% endfor %}
            {% endif %}
            <form id="risk-assessment-form" method="POST" action="{{ url_for('risk_assessment') }}" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Government Securities (%)</label>
                    <input type="number" id="gov_securities" name="gov_securities" step="0.01" min="0" max="100" placeholder="T-Bills, bonds, cocoa bonds, etc." class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.gov_securities if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Includes T-Bills, bonds, cocoa bonds, municipal and statutory agency securities. Max 75% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="gov_securities-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Local Government Securities (%)</label>
                    <input type="number" id="local_gov_securities" name="local_gov_securities" step="0.01" min="0" max="100" placeholder="Municipal bonds, Cocoa Bonds" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.local_gov_securities if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Municipal bonds, statutory agency bonds, Cocoa Bonds. Max 25% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="local_gov_securities-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Equities (GSE Stocks) (%)</label>
                    <input type="number" id="equities" name="equities" step="0.01" min="0" max="100" placeholder="Listed ordinary and preference shares" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.equities if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Listed shares on the Ghana Stock Exchange. Max 20% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="equities-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Bank Securities (%)</label>
                    <input type="number" id="bank_securities" name="bank_securities" step="0.01" min="0" max="100" placeholder="Fixed deposits, NCDs, repos, etc." class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.bank_securities if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Fixed deposits, NCDs, bankers acceptances, repos. Max 35% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="bank_securities-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Corporate Debt (%)</label>
                    <input type="number" id="corporate_debt" name="corporate_debt" step="0.01" min="0" max="100" placeholder="Bonds, debentures, commercial paper" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.corporate_debt if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Corporate bonds, debentures, and commercial paper. Max 35% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="corporate_debt-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Collective Investment Schemes (%)</label>
                    <input type="number" id="collective_schemes" name="collective_schemes" step="0.01" min="0" max="100" placeholder="Unit trusts, mutual funds, ETFs" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.collective_schemes if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Unit trusts, mutual funds, and ETFs. Max 15% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="collective_schemes-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Alternative Investments (%)</label>
                    <input type="number" id="alternatives" name="alternatives" step="0.01" min="0" max="100" placeholder="REITs, private equity, gold, etc." class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.alternatives if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">REITs, private equity, gold, etc. Max 25% per NPRA, with Foreign Assets max 5%.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="alternatives-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Foreign Assets (%)</label>
                    <input type="number" id="foreign" name="foreign" step="0.01" min="0" max="100" placeholder="Foreign investments" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.foreign if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Investments in foreign markets. Max 5% per NPRA.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="foreign-error">Please enter a valid percentage between 0 and 100.</div>
                </div>
                <div>
                    <label class="block text-gray-700 font-medium mb-2">Portfolio Value (GHS)</label>
                    <input type="number" id="portfolio_value" name="portfolio_value" step="0.01" min="0" placeholder="Enter portfolio value in GHS" class="input-field w-full h-12 px-4 py-3 rounded-lg shadow-sm" value="{{ form_data.portfolio_value if form_data else '' }}" required>
                    <div class="tooltip">
                        <i class="fas fa-info-circle text-gray-500 ml-2"></i>
                        <span class="tooltiptext">Total value of the portfolio in GHS.</span>
                    </div>
                    <div class="form-error text-danger text-sm mt-2 hidden" id="portfolio_value-error">Please enter a valid portfolio value.</div>
                </div>
                <div class="md:col-span-2">
                    <button type="submit" class="px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors">
                        <i class="fas fa-calculator mr-2"></i> Calculate
                    </button>
                </div>
            </form>
        </div>

        <!-- Results Section -->
        {% if result %}
        <div class="card p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Risk Assessment Results</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h4 class="font-bold text-gray-800 mb-2">Portfolio Expected Return</h4>
                    <p class="text-gray-700">{{ result.expected_return }}%</p>
                    <p class="text-sm text-gray-600 mt-2">The expected annual return of your portfolio based on asset allocations.</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h4 class="font-bold text-gray-800 mb-2">Portfolio Volatility</h4>
                    <p class="text-gray-700">{{ result.volatility }}%</p>
                    <p class="text-sm text-gray-600 mt-2">The standard deviation of portfolio returns, indicating risk level.</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg md:col-span-2">
                    <h4 class="font-bold text-gray-800 mb-2">Stress Test Loss (10% Market Drop)</h4>
                    <p class="text-gray-700">GHS {{ result.stress_loss }}</p>
                    <p class="text-sm text-gray-600 mt-2">Estimated loss in a 10% market decline scenario.</p>
                </div>
            </div>
            <div class="mt-6">
                <a href="/risk-assessment" class="px-4 py-2 bg-primary text-white rounded-lg font-medium flex items-center inline-block">
                    <i class="fas fa-redo mr-2"></i> Calculate Another
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Guide Section -->
        <div class="card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">How to Use the Risk Assessment Calculator</h2>
            <p class="text-gray-600 mb-6">Follow these steps to assess your portfolio’s risk and ensure compliance with NPRA guidelines.</p>
            <ol class="list-decimal pl-6 space-y-4">
                <li>
                    <strong>Enter Portfolio Allocations</strong>
                    <p>Provide the percentage allocations for each asset class: Government Securities (Treasury Bills, bonds, Green Bonds), Local Government and Statutory Agency Securities (municipal bonds, Cocoa Bonds), Corporate Debt (bonds, debentures, commercial paper), Equities (listed shares on the Ghana Stock Exchange), Bank Securities (fixed deposits, NCDs, repos), Collective Investment Schemes (unit trusts, mutual funds, ETFs), Alternative Investments (REITs, private equity, infrastructure bonds), and Foreign Assets (offshore investments).</p>
                </li>
                <li>
                    <strong>Ensure NPRA Compliance</strong>
                    <p>Verify that allocations meet NPRA limits: Government Securities (max 75%), Local Government and Statutory Agency Securities (max 25%), Corporate Debt (max 35%), Equities (max 20%), Bank Securities (max 35%), Collective Investment Schemes (max 15%), Alternative Investments (max 25%, with Foreign Assets max 5%). Up to 5% in Green Bonds (Government or Corporate) does not count toward the 75% or 35% limits, respectively. Ensure the sum of all allocations equals 100% for a fully invested portfolio.</p>
                </li>
                <li>
                    <strong>Input Portfolio Value</strong>
                    <p>Enter the total portfolio value in GHS to scale risk calculations.</p>
                </li>
                <li>
                    <strong>Calculate and Interpret</strong>
                    <p>Click “Calculate” to compute the portfolio’s expected return, volatility, and stress test loss for a 10% market drop. Review NPRA compliance alerts and risk metrics to assess portfolio safety and performance.</p>
                </li>
            </ol>
            <div class="flex flex-wrap gap-3 mt-6">
                <a href="/download_guide" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium flex items-center">
                    <i class="fas fa-download mr-2"></i> Download Guide
                </a>
            </div>
        </div>

        <!-- Navigation Buttons at Bottom -->
        <div class="nav-buttons mt-6">
            <a href="https://younginvestorcalculator.com/" class="nav-button home">
                <i class="fas fa-home"></i> Return to Home
            </a>
            <a href="https://younginvestorcalculator.com/#calculators" class="nav-button calculators">
                <i class="fas fa-calculator"></i> Other Calculators
            </a>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top w-12 h-12 bg-primary text-white rounded-full shadow-lg flex items-center justify-center">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- JavaScript -->
    <script>
        // Back to top button
        const backToTopBtn = document.getElementById('backToTop');
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Form validation
        document.getElementById('risk-assessment-form').addEventListener('submit', function(e) {
            let valid = true;
            const inputs = {
                gov_securities: document.getElementById('gov_securities'),
                local_gov_securities: document.getElementById('local_gov_securities'),
                equities: document.getElementById('equities'),
                bank_securities: document.getElementById('bank_securities'),
                corporate_debt: document.getElementById('corporate_debt'),
                collective_schemes: document.getElementById('collective_schemes'),
                alternatives: document.getElementById('alternatives'),
                foreign: document.getElementById('foreign'),
                portfolio_value: document.getElementById('portfolio_value')
            };

            // Reset error messages
            document.querySelectorAll('.form-error').forEach(error => error.classList.add('hidden'));

            // Validate percentages and NPRA limits
            const npraLimits = {
                gov_securities: { max: 75, error: 'Government Securities cannot exceed 75% per NPRA guidelines.' },
                local_gov_securities: { max: 25, error: 'Local Government Securities cannot exceed 25% per NPRA guidelines.' },
                equities: { max: 20, error: 'Equities cannot exceed 20% per NPRA guidelines.' },
                bank_securities: { max: 35, error: 'Bank Securities cannot exceed 35% per NPRA guidelines.' },
                corporate_debt: { max: 35, error: 'Corporate Debt cannot exceed 35% per NPRA guidelines.' },
                collective_schemes: { max: 15, error: 'Collective Investment Schemes cannot exceed 15% per NPRA guidelines.' },
                alternatives: { max: 25, error: 'Alternative Investments cannot exceed 25% per NPRA guidelines.' },
                foreign: { max: 5, error: 'Foreign Assets cannot exceed 5% per NPRA guidelines.' }
            };

            for (let key in inputs) {
                const value = parseFloat(inputs[key].value);
                if (isNaN(value) || value < 0 || (key !== 'portfolio_value' && value > 100)) {
                    document.getElementById(`${key}-error`).classList.remove('hidden');
                    document.getElementById(`${key}-error`).textContent = key === 'portfolio_value' ? 'Please enter a valid portfolio value.' : 'Please enter a valid percentage between 0 and 100.';
                    valid = false;
                } else if (npraLimits[key] && value > npraLimits[key].max) {
                    document.getElementById(`${key}-error`).classList.remove('hidden');
                    document.getElementById(`${key}-error`).textContent = npraLimits[key].error;
                    valid = false;
                }
            }

            // Validate sum of percentages
            const total = parseFloat(inputs.gov_securities.value) + parseFloat(inputs.local_gov_securities.value) + 
                         parseFloat(inputs.equities.value) + parseFloat(inputs.bank_securities.value) + 
                         parseFloat(inputs.corporate_debt.value) + parseFloat(inputs.collective_schemes.value) + 
                         parseFloat(inputs.alternatives.value) + parseFloat(inputs.foreign.value);
            if (Math.abs(total - 100) > 0.01) {
                alert('The sum of allocations must equal 100%. Current total: ' + total.toFixed(2) + '%');
                valid = false;
            }

            if (!valid) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>